<link rel="import" href="/polymer/polymer.html">
<link rel="import" href="/core-icon/core-icon.html">
<link rel="import" href="/core-icons/maps-icons.html">
<link rel="import" href="/core-icons/editor-icons.html">
<link rel="import" href="/paper-checkbox/paper-checkbox.html">
<!-- our custom element imports -->
<link rel="import" href="/elements/deal-card.html">

<polymer-element name="deal-table" attributes="day bizs">
  <template>
    <style>
    :host {
      display: block;
      margin: 0 auto;
    }
    #filters {
      background-color: rgb(236, 236, 236);
      box-shadow: 0px 3px 3px rgba(34, 49, 63, .5);
    }
    </style>

    <div id="filters">
      <paper-checkbox></paper-checkbox> under ten bucks yo
      <paper-checkbox checked></paper-checkbox> this is good stuff, right?
    </div>

    <div layout horizontal wrap style="width: 100%">
      <template repeat="{{b in bizs}}">
        <table>
          <template repeat="{{d in b.deals}}">
            <deal-card>
              <span id="dealtext">{{d.text}}</span>
              <template if="{{d.drink}}">
                <core-icon id="dealicon" icon="maps:local-bar"></core-icon>
                <span id="dealtype">drink</span>
              </template>
              <template if="{{d.eat}}">
                <core-icon id="dealicon" icon="maps:local-pizza"></core-icon>
                <span id="dealtype">eat</span>
              </template>
              <template if="{{!d.eat && !d.drink}}">
                <core-icon id="dealicon" icon="editor:attach-money"></core-icon>
                <span id="dealtype">non</span>
              </template>
              <span id="dealplace">{{d.place}}</span>
              <span id="dealprice">{{d.price}}</span>
            </deal-card>
          </template>
        </table>
      </template>
    </div>
  </template>

  <script>
  Polymer('deal-table', {
    containsDay: function (input) {
      var d = this.day;
      var bool = false;
      if (input) {
        input.map(function (element) {
          if (element.day === d) {
            bool = true;
          }
        });
        return bool;
      }
    }
  });
  </script>
</polymer-element>
