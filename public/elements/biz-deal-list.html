<link rel="import" href="/polymer/polymer.html">
<link rel="import" href="/core-icon/core-icon.html">
<link rel="import" href="/core-icons/maps-icons.html">
<link rel="import" href="/core-icons/editor-icons.html">
<link rel="import" href="/paper-checkbox/paper-checkbox.html">
<!-- our custom element imports -->
<link rel="import" href="/elements/deal-card.html">

<polymer-element name="biz-deal-list" attributes="day bizs">
  <template>
    <style>
    :host {
      display: block;
      margin: 0 auto;
    }
    #bname {
      font-weight: 300;
      padding: 5px 0;
      color: rgb(34, 49, 63);
      text-align: center;
      border-bottom: 1px solid rgb(190, 144, 212);
      background-color: rgb(236, 236, 236);
      font-size: 24px;
    }
    #biz-card {
      background-color: rgb(155, 89, 182);
      /*border-radius: 30px;*/
      width: 40%;
      border: 1px solid rgb(190, 144, 212);
      margin: 25px;
      padding-bottom: 15px;
    }
    #filters {
      background-color: rgb(236, 236, 236);
      box-shadow: 0px 3px 3px rgba(34, 49, 63, .5);
    }
    </style>

    <div id="filters">
      <paper-checkbox></paper-checkbox> under ten bucks yo
      <paper-checkbox checked></paper-checkbox> this is good stuff, right?
    </div>

    <div layout horizontal wrap style="width: 100%">
      <template repeat="{{b in bizs}}">
        <template if="{{containsDay(b.deals)}}">
          <div id="biz-card">
            <div id="bname">
              <span>{{b.name}}</span>
            </div>
            <template repeat="{{d in b.deals}}">
                <deal-card
                  hidden?="{{day !== d.day}}">
                  <template if="{{d.drink}}">
                    <core-icon icon="maps:local-bar"></core-icon>
                  </template>
                  <template if="{{d.eat}}">
                    <core-icon icon="maps:local-pizza"></core-icon>
                  </template>
                  <template if="{{!d.eat && !d.drink}}">
                    <core-icon icon="editor:attach-money"></core-icon>
                  </template>
                  <span>{{d.text}}</span>
                </deal-card>
            </template>
          </div>
        </template>
      </template>
    </div>
  </template>

  <script>
  Polymer('biz-deal-list', {
    containsDay: function (input) {
      var d = this.day;
      var bool = false;
      if (input) {
        input.map(function (element) {
          if (element.day === d) {
            bool = true;
          }
        });
        return bool;
      }
    }
  });
  </script>
</polymer-element>
